"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.exportDescription = void 0;
const artifacts_1 = require("./artifacts");
const create_1 = require("./create");
const download_1 = require("./download");
const list_1 = require("./list");
const options_1 = require("./options");
const status_1 = require("./status");
const showOnlyForExports = {
    resource: ['export'],
};
exports.exportDescription = [
    {
        displayName: 'Operation',
        name: 'operation',
        type: 'options',
        noDataExpression: true,
        displayOptions: {
            show: showOnlyForExports,
        },
        options: [
            {
                name: 'Create',
                value: 'create',
                action: 'Create an export',
                description: 'Create an export job for a project',
                routing: {
                    request: {
                        method: 'POST',
                        url: '=/projects/{{$parameter.projectId}}/exports',
                    },
                },
            },
            {
                name: 'Download',
                value: 'download',
                action: 'Download an export artifact',
                description: 'Download a single export artifact by object key',
                routing: {
                    request: {
                        method: 'GET',
                        url: '=/projects/{{$parameter.projectId}}/exports/download',
                        encoding: 'arraybuffer',
                        returnFullResponse: true,
                    },
                    output: {
                        postReceive: [
                            {
                                type: 'binaryData',
                                properties: {
                                    destinationProperty: '={{$parameter.binaryPropertyName}}',
                                },
                            },
                        ],
                    },
                },
            },
            {
                name: 'Get Status',
                value: 'get',
                action: 'Get export status',
                description: 'Get the status of an export job',
                routing: {
                    request: {
                        method: 'GET',
                        url: '=/projects/{{$parameter.projectId}}/exports/{{$parameter.exportId}}',
                    },
                },
            },
            {
                name: 'List',
                value: 'list',
                action: 'List exports',
                description: 'List exports for a project',
                routing: {
                    request: {
                        method: 'GET',
                        url: '=/projects/{{$parameter.projectId}}/exports',
                    },
                    output: {
                        postReceive: [
                            {
                                type: 'rootProperty',
                                properties: {
                                    property: 'exports',
                                },
                            },
                        ],
                    },
                },
            },
            {
                name: 'List Artifacts',
                value: 'artifacts',
                action: 'List export artifacts',
                description: 'List artifacts generated by an export job',
                routing: {
                    request: {
                        method: 'GET',
                        url: '=/projects/{{$parameter.projectId}}/exports/{{$parameter.exportId}}/artifacts',
                    },
                    output: {
                        postReceive: [
                            {
                                type: 'rootProperty',
                                properties: {
                                    property: 'artifacts',
                                },
                            },
                        ],
                    },
                },
            },
            {
                name: 'Options',
                value: 'options',
                action: 'Get export options',
                description: 'Get available locales, themes, and content variables',
                routing: {
                    request: {
                        method: 'GET',
                        url: '=/projects/{{$parameter.projectId}}/exports/options',
                    },
                },
            },
        ],
        default: 'create',
    },
    ...create_1.exportCreateDescription,
    ...status_1.exportStatusDescription,
    ...list_1.exportListDescription,
    ...artifacts_1.exportArtifactsDescription,
    ...options_1.exportOptionsDescription,
    ...download_1.exportDownloadDescription,
];
//# sourceMappingURL=index.js.map